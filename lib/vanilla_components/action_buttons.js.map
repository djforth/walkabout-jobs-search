{"version":3,"sources":["../../src/vanilla_components/action_buttons.js"],"names":[],"mappings":"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","file":"action_buttons.js","sourcesContent":["//Libraries\nconst React = require(\"react\");\nconst _     = require(\"lodash\");\n\n//Flux\nconst DataAction   = require(\"../actions/data_actions\");\n\n//Mixins\nconst textMixins = require(\"morse-react-mixins\").text_mixins;\nconst cssMixins  = require(\"morse-react-mixins\").css_mixins;\n\nclass ActionButtons extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  // deleteCallBack(flash){\n  //   // console.log('id', this.props.data.get(\"id\"));\n  //   // DataAction.deleteItem(this.props.data.get(\"id\"), {type:\"notice\"});\n  //   DataAction.deleteItem(this.props.data.get(\"id\"), flash);\n  //   if(_.isFunction(this.props.delete_cb)){\n  //     this.props.delete_cb(this.props.data.get(\"id\"), flash);\n  //   }\n  // }\n\n\n  componentWillMount(){\n\n    let config = _.map(this.props.config, (conf)=>{\n      if(!this.props.data.get(\"buttons\").has(conf.key)){\n        return \"\";\n      }\n\n      conf.restful         = conf.restful || \"get\";\n      if(conf.title){\n        conf.title_str  = this.setTitle(conf.title);\n      }\n\n      if(conf.delete_msg){\n        conf.delete_msg_str = this.setTitle(conf.delete_msg);\n      }\n      conf.path       = this.getPath(conf.key);\n      return conf;\n    });\n\n    this.setState({config:config});\n  }\n\n  getPath(key){\n    let btn = this.props.data.get(\"buttons\");\n    return btn.get(key);\n  }\n\n  renderButtons(){\n    if(this.props.data && this.state.config){\n      let btns = _.map(this.state.config, (config)=>{\n        if(config.path === \"\" || _.isNull(config.path)){\n          return \"\";\n        }\n        return (<li key={_.uniqueId()}>\n          <a href={config.path} title={config.title_str} className={config.options.button_css}>{config.text}</a>\n        </li>);\n      });\n\n      return btns;\n    }\n\n    return \"\";\n  }\n\n  render(){\n    return (\n      <ul className=\"actions\">\n        {this.renderButtons()}\n      </ul>\n    );\n  }\n  // Best performance - http://jsperf.com/test-approach\n  setTitle(obj){\n    let keys = _.remove(_.keys(obj), (k)=>{\n      return k !== \"text\";\n    });\n\n    let title = obj.text;\n    _.forEach(keys, (k)=>{\n      let txt = this.props.data.get(obj[k]);\n      title = title.replace(`:${k}`, txt);\n    });\n\n    return title;\n  }\n}\n\nObject.assign(ActionButtons.prototype, cssMixins);\nObject.assign(ActionButtons.prototype, textMixins);\n\nmodule.exports = ActionButtons;\n"]}