{"version":3,"sources":["../../src/vanilla_components/searchfilter.js"],"names":[],"mappings":"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","file":"searchfilter.js","sourcesContent":["//Libraries\nconst React   = require(\"react\");\nconst _ = require(\"lodash\");\n\nconst DataActions    = require(\"../actions/data_actions\");\nconst DataStore   = require(\"../stores/data_store\");\nconst FilterStore    = require(\"../stores/filter_store\");\nconst ColumnsStore   = require(\"../stores/columns_store\");\n\n//Mixins\nconst cssMixins  = require(\"morse-react-mixins\").css_mixins;\nconst textMixins = require(\"morse-react-mixins\").text_mixins;\n\nclass SearchFilters extends React.Component{\n\n  constructor(props) {\n    super(props);\n    this.dropdown =  [\"input-group-btn\", {\"open\":false}];\n\n\n\n    this.state = {\n      dropdown:this.getClasses(this.dropdown),\n      expanded:\"false\",\n      selectedkey:\"all\",\n      searchVal:\"\"\n    };\n  }\n\n  componentDidMount() {\n\n    this.quickSearch = (_.isBoolean(this.props.quickSearch)) ? this.props.quickSearch : true;\n\n    if(FilterStore.isSelectedKey(this.props.item)){\n      this.active = [{active:true}];\n      this.setState({active:this.getClasses(this.active)});\n    }\n\n    this.setState({searchVal:DataStore.getSearchVal()});\n    // FilterStore.addChangeListener(\"change_key\", this._openDropdown.bind(this));\n    ColumnsStore.addChangeListener(\"adding\", this._onAdd.bind(this));\n  }\n\n  componentWillUnmount() {\n    // FilterStore.removeChangeListener(\"change_key\", this._openDropdown);\n    ColumnsStore.removeChangeListener(\"adding\", this._onAdd);\n  }\n\n  _onAdd(){\n    this.setState({\n      keys:ColumnsStore.getSearchable()\n    });\n  }\n\n  _onChange(e){\n\n    if(this.quickSearch){\n      if(this.loop){\n        window.clearTimeout(this.loop);\n      }\n\n      this.loop = window.setTimeout((val)=>{\n        if(val.length > 2 || val === \"\"){\n          DataActions.searching(val);\n        }\n      }, 200, e.target.value);\n\n      this.setState({searchVal:e.target.value});\n    }\n\n    // _.defer((val)=>{\n    //   DataActions.searching(val);\n    // }, e.target.value);\n  }\n\n  // _openDropdown(){\n  //   this.dropdown = this.toggleCss(this.dropdown);\n  //   let expanded  = (this.state.expended === \"true\") ? \"false\" : \"true\";\n  //   this.setState({\n  //     dropdown:this.getClasses(this.dropdown),\n  //     expanded:expanded,\n  //     selectedkey:FilterStore.getSelectedKey()\n  //   });\n  // }\n\n  _preventSubmit(e){\n    // console.log(\"submiting\", e);\n    e.preventDefault();\n\n  }\n\n  // renderKeys(){\n  //   if(this.state.keys){\n  //     let items = this.state.keys.map(function(k){\n  //       return (<Keys item={k} key={_.uniqueId(\"key\")} />);\n  //       });\n\n  //       return items;\n  //   }\n  // }\n\n  render() {\n    return (\n      <form onSubmit={this._preventSubmit.bind(this)} className=\"search-filter\">\n        <input alt=\"Search\" type=\"image\" src={this.props.icon} />\n        <div className=\"fields-container\">\n          <input type=\"text\" name=\"querystr\" id=\"querystr\" placeholder=\"Search\" value={this.state.searchVal} onChange={this._onChange.bind(this)} />\n        </div>\n\n      </form>\n    );\n  }\n}\n\nObject.assign(SearchFilters.prototype, cssMixins);\nObject.assign(SearchFilters.prototype, textMixins);\n\nmodule.exports = SearchFilters;\n"]}